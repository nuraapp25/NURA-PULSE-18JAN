<analysis>
The AI engineer significantly enhanced the Nura Pulse application, addressing multiple feature requests and critical bugs. Initially, efforts focused on optimizing the Payment Data Extractor, which faced persistent issues with processing multiple images, leading to a planned background processing v2 (later paused) and then back to aggressive optimization of the original with GPT-4o-mini. Driver Onboarding was improved with intelligent CSV parsing, dynamic status matching (fixing Highly Interested and Not Interested misclassifications), and smart phone number duplicate detection. A critical IndentationError halted progress, requiring debugging and backend restarts. Battery consumption calculations proved challenging, involving deep dives into frontend and backend logic to correct column name inconsistencies and flawed calculation approaches (fixed by identifying min SOC and charging events). New features like Montra Feed Library View and Database Export/Import for Master Admins were initiated and partially implemented. The current focus is on building the Hotspot Planning Library, a major rewrite to store and view analysis files.
</analysis>

<product_requirements>
The Nura Pulse application is a role-based business data dashboard. Key features include:
1.  **Expense Tracker:** Mini-app for expense management (fully implemented).
2.  **Payment Data Extractor:** Processes screenshot data for tabular analysis. Optimized for speed, parallel processing, and with an enable/disable toggle for Master Admins.
3.  **Hotspot Planning:** CSV trip data upload for K-Means clustering analysis. Currently being expanded with a library view for saved analyses.
4.  **Driver Onboarding Two-Way Sync:** Auto-sync with Google Sheets. UI/UX improvements, hierarchical statuses, inline editing, multi-format imports with dynamic column reading, smart status matching (e.g., Highly Interested and correct Not Interested), and duplicate phone number detection.
5.  **QR Code Management System (Master Admins):** Dynamic QR code creation, scan data tracking. Enhancements requested include UTM parameters (auto-fill from campaign), bulk QR code generation (vehicle-based IDs), and batch download.
6.  **Ride Deck Data Analysis (NEW):** XLSX upload, Google Maps distance calculation, locality extraction, customer/ride data import, view/download/delete data with pagination.
7.  **RCA Management (NEW):** Tables for Cancellation RCA and Driver_Not_Found RCA with status reason/detail.
8.  **Analytics Dashboards (NEW):** Ride Status and SignUps pivot tables, converting UTC to IST. Fixes implemented for Excel serial date conversion and null handling.
9.  **User Activity Analytics (NEW):** Dashboard for user actions history and live feed.
10. **Montra Feed Library View (NEW):** Integrated into Montra Vehicle Insights, to manage CSV/XLSX files, with search, filters, and download.
11. **Database Export/Import (NEW):** Master Admin only, under Manage DB, for full app data backup/restore.
</product_requirements>

<key_technical_concepts>
-   **Full-stack**: React (Shadcn UI, Tailwind CSS, Chart.js), FastAPI, MongoDB.
-   **Auth & Authz**: JWT, role-based access control.
-   **Geospatial**: Google Maps API, K-Means clustering.
-   **LLM Integration**: OpenAI GPT-4o Vision, GPT-4o-mini, Emergent LLM Key for OCR.
-   **Google Sheets**: Two-way sync via Apps Script.
-   **Data Processing**: Pandas for Excel/CSV, asynchronous tasks.
</key_technical_concepts>

<code_architecture>

-   ****: Core FastAPI backend.
    -   **Summary**: Central API handler.
    -   **Changes**: Optimized Payment Data Extractor (GPT-4o-mini, parallel processing). Added Ride Pay Extract v2 endpoints (upload, background processing, status, data). Fixed Analytics Dashboards (date conversion, null handling). Enhanced Driver Onboarding import (dynamic header reading, smart status matching, duplicate phone number detection). Added QR Code Management bulk delete. Fixed Montra Vehicle Battery SOC column name sensitivity and corrected battery calculation logic placement. Implemented Database Export/Import endpoints. Added Hotspot Planning library endpoints.
-   ****: Pydantic data models.
    -   **Summary**: Defines data structures.
    -   **Changes**:  model updated for UTM parameters and campaign fields.
-   ** (NEW file)**:
    -   **Summary**: Worker for asynchronous payment data processing.
    -   **Changes**: Newly created for the Ride Pay Extract v2 architecture.
-   ****: Main application routes.
    -   **Summary**: Defines frontend routing.
    -   **Changes**: Added routes for  and renamed/updated  to .
-   ****: Main dashboard.
    -   **Summary**: Provides navigation.
    -   **Changes**: Added Ride Pay Extract v2 and Manage DB to sidebar with respective icons.
-   ****: Payment data extractor frontend.
    -   **Summary**: Manages screenshot uploads.
    -   **Changes**: Updated frontend timeout (initially increased, then reduced) and improved file selection feedback.
-   ****: Driver lead management frontend.
    -   **Summary**: Manages driver data.
    -   **Changes**: UI updated to display duplicate phone numbers effectively; old duplicate action buttons removed.
-   ****: Montra Vehicle Battery Analytics frontend.
    -   **Summary**: Displays battery data and graphs.
    -   **Changes**: Rewrote calculation logic for charge drop/percentage and fixed column name typo to ensure accurate graph display.
-   ** (NEW file)**:
    -   **Summary**: Frontend for the Ride Pay Extract v2 feature.
    -   **Changes**: New page created.
-   ** (Renamed from )**:
    -   **Summary**: Frontend for Master Admin database export/import.
    -   **Changes**: Completely rewritten to offer database backup/restore.
-   ****: Hotspot Planning frontend.
    -   **Summary**: Manages trip data upload.
    -   **Changes**: Currently undergoing a major rewrite to incorporate a library view.
</code_architecture>

<pending_tasks>
-   Complete the QR Code Manager enhancements, including UTM parameters in UI, auto-fill, bulk QR code generation, and batch download. (Frontend part pending).
-   Complete the Hotspot Planning library feature, including frontend UI for storing and viewing analyses.
</pending_tasks>

<current_work>
The AI engineer is currently in the process of implementing the Hotspot Planning library feature. The user requested this feature to store uploaded CSV/XLSX files for hotspot planning, allowing individual viewing of each saved analysis. The previous step involved updating the backend () by adding new API endpoints for library management (e.g., saving analyses, retrieving lists of saved analyses, viewing individual analyses, and potentially deletion). The most recent message from the user (Chat Message 533) was lets fork later after hotspot planning fix?, to which the AI responded (Chat Message 534) Yes, perfect! Let me complete the Hotspot Planning fix with the library feature, then you can fork with everything working. Let me now update the frontend:. This confirms the backend modifications are in place and the immediate next step is to proceed with implementing the corresponding frontend components and logic in  to integrate these new backend functionalities and create the desired library view.
</current_work>

<optional_next_step>
Implement the frontend for the Hotspot Planning library feature in .
</optional_next_step>
